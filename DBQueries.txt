CREATE TABLE `usernames` (
 `id` int(11) NOT NULL,
 `nickname` varchar(50) NOT NULL,
 PRIMARY KEY (`id`),
 FOREIGN KEY (`id`) REFERENCES users(`id`)
);

CREATE TABLE `images` (
 `id` int(11) NOT NULL,
 `etag` varchar(50) NOT NULL,
 `keyname` varchar(512) NOT NULL,
 `title` varchar(50) NOT NULL,
 `caption` tinytext,
 `created` datetime NOT NULL,
 `likes` int(11),
 CONSTRAINT img_key PRIMARY KEY (`keyname`),
 FOREIGN KEY (`id`) REFERENCES users(`id`)
);

CREATE TABLE `comments` (
 `comment_id` int(11) NOT NULL AUTO_INCREMENT,
 `image_id` varchar(512) NOT NULL,
 `user_id` int(11) NOT NULL,
 `comment` text,
 `created` datetime,
 CONSTRAINT comment_key PRIMARY KEY (`comment_id`),
 FOREIGN KEY (`image_id`) REFERENCES images(`keyname`),
 FOREIGN KEY (`user_id`) REFERENCES users(`id`)
);